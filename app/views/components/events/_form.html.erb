<%= turbo_frame_tag "kind_content" do %> <% end %>

<div data-controller="events-form" class="bg-light-palette-p5 border-2 border-neutral-150 border-light-palette-p3 rounded">
  <header class="border-b-2 border-neutral-100 h-18 flex flex-wrap items-center px-3 py-4">
    <p class="flex-[1_1_180px] text-dark-gray-palette-p1 typography-body-s-lh150">Ações</p>

    <div class="flex space-x-2.5">
      <!-- Dropdown menu -->
      <button id="dropdownMenuIconHorizontalButton" data-dropdown-toggle="dropdownDotsHorizontal"  class="md:hidden inline-flex items-center p-2 text-sm font-medium text-center text-gray-900 bg-white rounded-lg hover:bg-gray-100 focus:ring-4 focus:outline-none dark:text-white focus:ring-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-600" type="button">
        <i data-lucide="chevron-down" class="text-gray-pallete-p3"></i>
      </button>
      <!-- Dropdown menu -->
      <div id="dropdownDotsHorizontal" class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600" >
        <ul class="py-2 text-sm text-gray-700 dark:text-gray-200" aria-labelledby="dropdownMenuIconHorizontalButton">
          <li>
            <a data-action="click->events-form#selectWppConnect" class="flex items-center gap-x-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white hover:no-underline hover:cursor-pointer">
              <%= embedded_svg('icon-whtass.svg', class:"transition delay-100 duration-100 h-3.5 fill-gray-pallete-p3 mx-[5px] group-hover:fill-brand-palette-03") %>
              <p class=" transition delay-100 duration-100 m-0  text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Whatsapp</p>
            </a>
          </li>
          <li>
            <a data-action="click->events-form#selectActivity" class="flex items-center gap-x-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white hover:no-underline hover:cursor-pointer">
              <i data-lucide="clipboard-list" class="transition delay-100 duration-100 h-3.5 text-gray-pallete-p3 group-hover:text-brand-palette-03 group-[.btn-active]:text-brand-palette-03"></i>
              <p class=" transition delay-100 duration-100 m-0  text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Atividade</p>
            </a>
          </li>
          <li>
            <a data-action="click->events-form#selectNote" class="flex items-center gap-x-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white hover:no-underline hover:cursor-pointer">
              <i data-lucide="menu-square" class="transition delay-100 duration-100 h-3.5 text-gray-pallete-p3 group-hover:text-brand-palette-03 group-[.btn-active]:text-brand-palette-03"></i>
              <p class=" transition delay-100 duration-100 m-0  text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Nota</p>
            </a>
          </li>
          <% if current_user.account.apps_chatwoots.present? && @contact.additional_attributes['chatwoot_id'].present?%>
            <li>
              <a data-action="click->events-form#selectChatwootConnect" class="flex items-center gap-x-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white hover:no-underline hover:cursor-pointer">
                <i data-lucide="message-circle" class= "w-5 transition delay-100 duration-100 h-3.5 stroke-gray-pallete-p3 mx-[2px] group-[.btn-active]:stroke-brand-palette-03 -rotate-[101deg]"></i>
                <p class=" transition delay-100 duration-100 m-0  text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Chatwoot</p>
              </a>
            </li>
          <% else %>
            <li>
              <a data-popover-target="popover-default-chatwoot-mobile" data-popover-placement="left" type="button" class="flex items-center gap-x-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white hover:no-underline hover:cursor-pointer">
                <i data-lucide="message-circle" class= "w-5 transition delay-100 duration-100 h-3.5 stroke-gray-pallete-p3 mx-[2px] group-[.btn-active]:stroke-brand-palette-03 -rotate-[101deg]"></i>
                <p class=" transition delay-100 duration-100 m-0  text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Chatwoot</p>
              </a>
            </li>
            <div data-popover id="popover-default-chatwoot-mobile" data-popover-placement="left" role="tooltip" class="absolute z-[1000] invisible inline-block w-64 text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-0 dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800">
              <div class="px-3 py-2 bg-gray-100 border-b border-gray-200 rounded-t-lg dark:border-gray-600 dark:bg-gray-700">
                  <h3 class="font-semibold text-gray-900 dark:text-white">Integração chatwoot</h3>
              </div>
              <div class="px-3 py-2">
                  <p>É necessário que os usuários <%= current_user.email %> e <%= @contact.full_name %> estejam cadastrados no chatwoot.</p>
              </div>
              <div data-popper-arrow></div>
          </div>
          <% end %>
        </ul>
    </div>
      <!-- Icone atividade -->
      <a data-action="click->events-form#selectActivity" class="hidden md:flex transition delay-100 duration-100 group pr-0.5 h-10 flex items-center text-sm text-gray-900 hover:no-underline hover:cursor-pointer">
        <div class="w-10 rounded-lg border h-10 transition min-[495px]:rounded-none delay-100 duration-100 px-2 min-[495px]:rounded-l-lg min-[495px]:border-y min-[495px]:border-l border-light-palette-p3 flex items-center text-sm bg-light-palette-p4 group-hover:bg-brand-palette-07 group-hover:border-brand-palette-07 group-[.btn-active]:bg-light-palette-p5">
          <i data-lucide="clipboard-list" class="transition delay-100 duration-100 h-3.5 text-gray-pallete-p3 group-hover:text-brand-palette-03 group-[.btn-active]:text-brand-palette-03"></i>
        </div>
        <div class="hidden min-[495px]:flex transition delay-100 duration-100 flex items-center rounded-r-lg border border-light-palette-p3 bg-light-palette-p5 group-hover:border-brand-palette-07 h-full w-full group-[.btn-active]:bg-brand-palette-08">
          <p class=" transition delay-100 duration-100 m-0 px-3 text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Atividade</p>
        </div>
      </a>
      <!-- Icone nota -->
      <a data-action="click->events-form#selectNote" class="hidden md:flex transition delay-100 duration-100 group pr-0.5 h-10 flex items-center text-sm text-gray-900 hover:no-underline hover:cursor-pointer">
        <div class="w-10 border rounded-lg h-10 transition min-[495px]:rounded-none delay-100 duration-100 px-2 min-[495px]:rounded-l-lg min-[495px]:border-y min-[495px]:border-l border-light-palette-p3 flex items-center text-sm bg-light-palette-p4 group-hover:bg-brand-palette-07 group-hover:border-brand-palette-07 group-[.btn-active]:bg-light-palette-p5">
          <i data-lucide="menu-square" class="transition delay-100 duration-100 h-3.5 text-gray-pallete-p3 group-hover:text-brand-palette-03 group-[.btn-active]:text-brand-palette-03"></i>
        </div>
        <div class="hidden min-[545px]:flex transition delay-100 duration-100 flex items-center rounded-r-lg border border-light-palette-p3 bg-light-palette-p5 group-hover:border-brand-palette-07 h-full w-full group-[.btn-active]:bg-brand-palette-08">
          <p class="transition delay-100 duration-100 m-0 px-3 text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Nota</p>
        </div>
      </a>
      <!-- Icone Chatwoot -->
      <% if current_user.account.apps_chatwoots.present? && @contact.additional_attributes['chatwoot_id'].present?%>
        <a data-action="click->events-form#selectChatwootConnect"  class="hidden md:flex transition delay-100 duration-100 group pr-0.5 h-10 flex items-center text-sm text-gray-900  hover:no-underline hover:cursor-pointer">
          <div class=" border rounded-lg h-10 transition min-[495px]:rounded-none delay-100 duration-100 px-1 min-[495px]:rounded-l-lg min-[495px]:border-y min-[495px]:border-l border-light-palette-p3 flex items-center text-sm bg-light-palette-p4 group-hover:bg-brand-palette-07 group-hover:border-brand-palette-07 group-[.btn-active]:bg-light-palette-p5">
            <i data-lucide="message-circle" class= "w-5 transition delay-100 duration-100 h-3.5 stroke-gray-pallete-p3 mx-[5px] group-[.btn-active]:stroke-brand-palette-03 -rotate-[101deg]"></i>
          </div>
          <div class="hidden min-[647px]:flex transition delay-100 duration-100 flex items-center rounded-r-lg border border-light-palette-p3 bg-light-palette-p5 group-hover:border-brand-palette-07 h-full w-full group-[.btn-active]:bg-brand-palette-08">
            <p class="transition delay-100 duration-100 m-0 px-3 text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Chatwoot</p>
          </div>
        </a>
      <% else %>
        <a data-popover-target="popover-chatwoot" type="button" class="hidden md:flex transition delay-100 duration-100 group pr-0.5 h-10 flex items-center text-sm text-gray-900  hover:no-underline hover:cursor-pointer">
          <div class=" border rounded-lg h-10 transition min-[495px]:rounded-none delay-100 duration-100 px-1 min-[495px]:rounded-l-lg min-[495px]:border-y min-[495px]:border-l border-light-palette-p3 flex items-center text-sm bg-light-palette-p4 group-hover:bg-brand-palette-07 group-hover:border-brand-palette-07 group-[.btn-active]:bg-light-palette-p5">
            <i data-lucide="message-circle" class= "w-5 transition delay-100 duration-100 h-3.5 stroke-gray-pallete-p3 mx-[5px] group-[.btn-active]:stroke-brand-palette-03 -rotate-[101deg]"></i>
          </div>
          <div class="hidden min-[647px]:flex transition delay-100 duration-100 flex items-center rounded-r-lg border border-light-palette-p3 bg-light-palette-p5 group-hover:border-brand-palette-07 h-full w-full group-[.btn-active]:bg-brand-palette-08">
            <p class="transition delay-100 duration-100 m-0 px-3 text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">Chatwoot</p>
          </div>
        </a>
        <div data-popover id="popover-chatwoot" role="tooltip" class="absolute z-[1000] invisible inline-block w-64 text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-0 dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800">
          <div class="px-3 py-2 bg-gray-100 border-b border-gray-200 rounded-t-lg dark:border-gray-600 dark:bg-gray-700">
              <h3 class="font-semibold text-gray-900 dark:text-white">Integração chatwoot</h3>
          </div>
          <div class="px-3 py-2">
              <p>É necessário que os usuários <%= current_user.email %> e <%= @contact.full_name %> estejam cadastrados no chatwoot.</p>
          </div>
          <div data-popper-arrow></div>
      </div>
      <% end %>
       <!-- Icone WhatsApp -->
       <a data-action="click->events-form#selectWppConnect" class="hidden md:flex transition delay-100 duration-100 group pr-0.5 h-10 flex items-center text-sm text-gray-900  hover:no-underline hover:cursor-pointer">
        <div class="w-10 border rounded-lg h-10 transition min-[495px]:rounded-none delay-100 duration-100 px-3 min-[495px]:rounded-l-lg min-[495px]:border-y min-[495px]:border-l border-light-palette-p3 flex items-center text-sm bg-light-palette-p4 group-hover:bg-brand-palette-07 group-hover:border-brand-palette-07 group-[.btn-active]:bg-light-palette-p5">
          <%= embedded_svg('icon-whtass.svg', class:"transition delay-100 duration-100 h-3.5 fill-gray-pallete-p3 mx-auto group-hover:fill-brand-palette-03") %>
        </div>
        <div class="hidden min-[647px]:flex transition delay-100 duration-100 flex items-center rounded-r-lg border border-light-palette-p3 bg-light-palette-p5 group-hover:border-brand-palette-07 h-full w-full group-[.btn-active]:bg-brand-palette-08">
          <p class="transition delay-100 duration-100 m-0 px-3 text-dark-gray-palette-p3 group-hover:text-dark-gray-palette-p1 group-hover:font-medium group-[.btn-active]:text-brand-palette-03 group-[.btn-active]:font-semibold">WhatsApp</p>
        </div>
      </a>

    </div>
  </header>

  <div class="flex justify-center overflow-hidden h-auto" data-events-form-target="forms">
    <div class="px-4 py-5 items-center text-center events-form-active" data-events-form-target="kindNone">
      <div class="flex justify-center items-center flex-col mt-4">
        <div class="border-2 rounded-md flex justify-center items-center text-center w-11 h-11 border-brand-palette-07 bg-brand-palette-08">
          <i data-lucide="layout-grid" class="text-brand-palette-03"></i>
        </div>
      </div>
      <div class="m-3">
        <p class="font-semibold mb-0 typography-body-s-lh150 text-dark-gray-palette-p1">Adicionar atividade</p>
        <p class="typography-text-r-lh150 text-dark-gray-palette-p3">Clique aqui ou nos campos acima para adicionar uma atividade</p>
        <p></p>
      </div>
    </div>
    <% if current_user.account.apps_chatwoots.present? %>
    <div data-events-form-target="kindChatwootConnect" hidden class="h-full w-full">
      <%= render "components/events/form/chatwoot_message", event: @event, url: account_contact_events_path(current_user.account, contact_id: @deal.contact.id, deal_id: @deal.id), edit_event_form: false %>
    </div>
    <% end %>
    <div data-events-form-target="kindNote" hidden class="h-full w-full pt-3">
     <%= render "components/events/form/note", event: @event, url: account_contact_events_path(current_user.account, contact_id: @deal.contact.id, deal_id: @deal.id), edit_event_form: false %>
    </div>
    <div data-events-form-target="kindActivity" hidden class="h-full w-full">
      <%= render "components/events/form/activity", event: @event, url: account_contact_events_path(current_user.account, contact_id: @deal.contact.id, deal_id: @deal.id), edit_event_form: false %>
    </div>
    <div data-events-form-target="kindWppConnect" hidden class="h-full w-full">
      <%= render "components/events/form/wpp_connect_message", event: @event, url: account_contact_events_path(current_user.account, contact_id: @deal.contact.id, deal_id: @deal.id), edit_event_form: false %>
    </div>
  </div>
</div>
