<div data-events-form-target="kindWppConnect" hidden class="h-full w-full">
  <%= form_with(model: event, url: account_contact_events_path(current_user.account, contact_id: deal.contact.id, deal_id: deal.id), namespace: 'wpp_connect') do |form| %>
    <% if event.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(event.errors.count, "error") %> prohibited this activity kind from being saved:</h2>

        <ul>
          <% event.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= form.hidden_field :app_type, value: 'Apps::WppConnect' %>
    <%= form.hidden_field :kind, value: 'wpp_connect_message' %>

    <div class="p-3 mt-4 flex">
      <div class="w-full pr-3">
        <%= form.label :app_id, 'De', class:'py-1 typography-text-m-lh150 text-dark-gray-palette-p1' %>
        <%= form.select(:app_id, current_user.account.apps_wpp_connects.actives.map { | wpp | [ wpp.name, wpp.id ]  } , {}, {class: 'form-input w-full'} ) %>
      </div>

      <div class="w-full">
        <%= form.fields_for(:custom_attributes) do |ca| %>
          <%= ca.label :wpp_connect_message_to, 'Para', class:'py-1 typography-text-m-lh150 text-dark-gray-palette-p1' %>
          <%= ca.text_field :wpp_connect_message_to, value: event.contact.phone , class: 'form-input w-full h-10' %>
        <% end %>
      </div>
    </div>

    <div class="border-t border-light-palette-p3 p-3 mt-4">
      <%= form.label :content, 'ConteÃºdo da mensagem', class:'py-2 typography-text-m-lh150 text-dark-gray-palette-p1' %>
      <%= form.text_area :content, class: 'form-input w-full' %>
    </div>


    <div class="border-t border-light-palette-p3 p-3 mt-4">
      <%= form.label :due ,"Agendar", class: 'typography-text-m-lh150 text-dark-gray-palette-p1' %>
      <%= form.text_field :due, class: 'form-input w-full', type: 'datetime-local' %>
    </div>

    <footer class="flex flex-row-reverse border-t border-light-palette-p3 p-3 mt-4 gap-2">
      <%= form.submit 'Confirmar', class: 'btn-primary cursor-pointer' %>

      <input type="button" value="Cancelar" data-action="click->events-form#selectNone" class="btn-secondary-2 cursor-pointer">
    </footer>
  <% end %>
</div>


