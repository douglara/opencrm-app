<h2 class= "typography-body-s-lh150 text-dark-gray-palette-p1">Campos personalizados</h2>
<%= f.fields_for(:custom_attributes, builder: CustomFormBuilderHelper::CustomFormBuilder) do |sf| %>

<%
=begin%>
 <% m.custom_attributes.each do | key, value | %>
    <div class="form-group">
      <%= sf.label key.to_sym %><br />
      <%= sf.text_field key.to_sym, value: value, autofocus: true, class: "form-control" %>
    </div>
  <% end %>
<%
=end
%>


  <% current_user.account.custom_attributes_definitions.where(attribute_model: "#{m.class.name.downcase}_attribute").each do | custom_attribute | %>
    <div class="grid gap-1">
      <%= sf.label custom_attribute.attribute_key.to_sym, custom_attribute.attribute_display_name, class: "typography-text-m-lh150 text-dark-gray-palette-p1" %>

      <% if custom_attribute.attribute_type_field == "select_custom" %>
        <%= sf.select(:select_custom, custom_attribute.attribute_options_select.split(",").map(&:strip),
                      { selected: m.custom_attributes["select_custom"] }, { class: 'form-input'  } ) %>
      <% else %>
        <%= sf.send(custom_attribute.attribute_type_field, custom_attribute.attribute_key.to_sym,
                  value: m.custom_attributes[custom_attribute.attribute_key],
                  step: 0.01,
                  class: "form-input") %>
      <% end %>

    </div>
  <% end %>
<% end %>
